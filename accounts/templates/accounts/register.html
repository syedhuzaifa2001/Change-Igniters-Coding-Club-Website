{% extends "base.html" %}
{% block cssLinksAndTitle %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet"/>
<title>
 Register - Change Igniters
</title>
  <style>
     .btn[disabled] {
    opacity: 0.5;
    pointer-events: none;
    background-color: #032c64;
  }
  </style>
 {% endblock cssLinksAndTitle %}

 {% block body %}
 <body class="body Reg_Sec" style="background-image:linear-gradient(to bottom right, rgb(2 5 46), rgb(179 203 255))">
  {% endblock body %}
{% block mainContent %}
{% if success %}
  <div id="myModalCont" class="modalCont">
    <div class="modal-content-cont">
      <img src="{{MEDIA_URL}}static-images/contactSection/gif1.gif" alt="" />
      <p>Registered successfully.</p>
    </div>
  </div>
  {% endif %} 
    <section class="h-100 ">
        <div class="container pb-4 h-100">
          <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col">
              <div class="card card-registration MainForm my-4">
                <div class="row g-0">
                  <div class="col-xl-12 Registration">
        <form class="card-body p-md-5 text-black" method="post" action="{% url 'account-register' %}" enctype="multipart/form-data" onsubmit="return ajaxpost()">
            {% csrf_token %}
                      <div class="Reg_flex">
                        <div class="d-flex align-item-center justify-content-center">
                          <img id="regLogo" src="{{ MEDIA_URL }}static-images/regSection/r8.png" alt="">
                        </div>
                        <div class="form-heading mb-5 text-uppercase d-flex flex-wrap justify-content-center align-item-center text-center">
                          Registration
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6 mb-4">
                          <div class="form-outline">
                            <input type="text" id="form3Example1m" class="form-control formFiSize form-control-lg" name="name" placeholder="Name" required="required" />
                          </div>
                        </div>
                        <div class="col-md-6 mb-4">
                          <div class="form-outline">
                            <input type="text" id="form3Example1n" class="form-control formFiSize form-control-lg" name="username" placeholder="Username" required="required"/>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6 mb-4">
                          <div class="form-outline">
                            <input type="password" id="password" class="form-control form-control-lg passwordReg formFiSize" name="password" placeholder="Password" required="required" onchange="function validatePassword()">
                            <div class="invalid-feedback"></div>
                            <input type="checkbox" id="showPasswordReg" class="mt-3 ms-3 me-1">
                            <label for="showPasswordReg" class="show-password-label">Show Password</label>
                          </div>
                        </div>
                        <div class="col-md-6 mb-4">
                          <div class="form-outline">
                            <input type="email" id="form3Example9" class="form-control  formFiSize form-control-lg" name="email" placeholder="Email" required="required"/>
                          </div>
                        </div>
                      </div>      
                      <div class="d-md-flex justify-content-start align-items-center mb-4 py-2">
                        <h6 class="mb-0 me-4">
                          Gender: 
                        </h6>      
                        <div class="form-check form-check-inline mb-0 me-4">
                          <input class="form-check-input regRadio" type="radio" name="gender" id="femaleGender"
                            value="Female" required />
                          <label class="form-check-label" for="femaleGender">Female</label>
                        </div>
      
                        <div class="form-check form-check-inline mb-0 me-4">
                          <input class="form-check-input regRadio" type="radio" name="gender" id="maleGender"
                            value="Male" />
                          <label class="form-check-label" for="maleGender">Male</label>
                        </div>
      
                        <div class="form-check form-check-inline mb-0">
                          <input class="form-check-input regRadio" type="radio" name="gender" id="otherGender"
                            value="Other" />
                          <label class="form-check-label" for="otherGender">Other</label>
                        </div>
      
                      </div>
      
                      <div class="row">
                        <div class="col-md-6 mb-4">
                          <select class="form-select form-control formFiSize form-select-lg mb-3"  name="city" aria-label=".form-select-lg example" required>
                            <option disabled selected value="">
                              City
                            </option>
                            <option value="Karachi">
                              Karachi
                            </option>
                            <option value="Hyderabad">
                              Hyderabad
                            </option>
                            <option value="Jamshoro">
                              Jamshoro
                            </option>
                          </select>
                        </div>
                        <div class="col-md-6 mb-4">
                          <select class="form-select form-control formFiSize form-select-lg mb-3" name="category" aria-label=".form-select-lg example" required>
                            <option disabled selected value="">
                              Category
                            </option>
                            <option value="Undergraduate">
                              Undergraduate
                            </option>
                            <option value="Postgraduate">
                              Postgraduate
                            </option>                            
                          </select>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6 mb-4">
                          <select class="form-select form-control formFiSize form-select-lg mb-3" name="batch" aria-label=".form-select-lg example">
                            <option disabled selected value="">
                              Batch
                            </option>
                            <option value="2022">
                              2022-23
                            </option>
                            <option value="2021">
                              2021-22
                            </option>
                            <option value="2020">
                              2020-21
                            </option>
                            <option value="Older">
                              Older
                            </option>
                          </select>
                        </div>
                        <div class="col-md-6 mb-4">
                          <select class="form-select form-control formFiSize form-select-lg mb-3" name="department" aria-label=".form-select-lg example">
                            <option disabled selected value="">
                              Department
                             </option>
                             <option value="BCIT">
                               Bachelor in Computer Science and Information Technology
                             </option>
                             <option value="SE">
                              Bachelor in Software Engineering
                             </option>
                             <option value="CIS">
                              Bachelor in Computer & Information Systems Engineering
                             </option>
                          </select>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-6 mb-4">
                          <select class="form-select form-control formFiSize form-select-lg mb-3" name="university" aria-label=".form-select-lg example" >
                            <option disabled selected value="">
                              University
                            </option>
                            <option value="NED University">
                              NED University
                            </option>
                            <option value="Mehran University">
                              Mehran University
                            </option>
                            <option value="Karachi University">
                              Karachi University
                            </option>
                            <option value="Other">
                             Others
                            </option>
                          </select>
                        </div>
                        <div class="col-md-6 mb-4">
                          
                            <select class="form-select form-control formFiSize form-select-lg mb-3"  name="employment_status" aria-label=".form-select-lg example" required>
                              <option disabled selected value="">
                                Employment Status
                               </option>
                               <option value="Internee">
                                Internee
                               </option>
                               <option value="Full-time Job">
                                Full-time Job
                               </option>
                               <option value="Part-time Job">
                                Part-time Job
                               </option>
                               <option value="Freelancer">
                                Freelancer
                               </option>
                               <option value="None">
                                None
                               </option>                            
                            </select>                      
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6 mb-4">
                          <div class="form-outline">
                            <input type="text" pattern="[0-9]{11}" name="contact_number" id="ContactNo" class="form-control formFiSize form-control-lg" placeholder="Contact Number" required="required" />
                          </div>
                        </div>
                        <div class="col-md-6 mb-4">
                          <div class="form-outline">
                 <input class="form-control formFiSize form-control-lg" name="facebook_url" id="FacebookURL" placeholder="Facebook URL" required="required" type="url"/>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6 mb-4">
                          <div class="form-outline">
                 <input class="form-control formFiSize form-control-lg" name="github_url" id="GitHubURL" placeholder="GitHub URL" required="required" type="url"/>
                          </div>
                        </div>
                        <div class="col-md-6 mb-4">
                          <div class="form-outline">
                 <input class="form-control formFiSize form-control-lg" name="linkedin_url" id="LinkedInURL" placeholder="LinkedIn URL" required="required" type="url"/>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6 mb-4">
                          <div class="circlePic">
                            <img class="profile-pic" src="https://t3.ftcdn.net/jpg/03/46/83/96/360_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg"/>
                          </div>
                          <div class="profile-image">
                            <button class="btn UploadBtn ProfileUpload-button">
                              Upload Picture                                                         
                            </button>
                            <label for="profile_picture">
                             <input type="file" accept=".png,.jpg, .jpeg" name="profile_picture" id="Profile-upload" class="Profile-upload form-control"/>                            
                            </div>
                            </div>
                       <div class="col-md-6">                  
                       </div>
                     </div>                    
                    <div class="d-flex justify-content-end pt-3">                        
                      <button type="submit" class="btn RegBtn" id="RegBtnOrg" disabled  value="Register">
                        Register
                      </button>
                    </div>
                    <div class="row">
                      <p>
                        Already have an Account?
                        <a href="{% url 'account-login' %}" class="link-info">Login here</a>
                      </p>
                    </div>
                    </form>
                    
                  </div>
                  
                </div>
                
              </div>
            </div>
            
          </div>
          
        </div>
    </section>
{% endblock mainContent %}
{% block jsLinks %}
<script>
  $(document).ready(function() {

    
var readURL = function(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('.profile-pic').attr('src', e.target.result);
        }

        reader.readAsDataURL(input.files[0]);
    }
}

$(".file-upload").on('change', function(){
    readURL(this);
});

$(".upload-button").on('click', function() {
   $(".file-upload").click();
});
});
</script>
<script>
  $(document).ready(function() {

    
var readURL = function(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('.profile-pic').attr('src', e.target.result);
        }

        reader.readAsDataURL(input.files[0]);
    }
}

$(".Profile-upload").on('change', function(){
    readURL(this);
});

$(".ProfileUpload-button").on('click', function(e) {
  e.preventDefault();
   $(".Profile-upload").click();
});
});
//   const passwordInput = document.getElementById("passwordReg");
// const invalidFeedback = document.querySelector(".invalid-feedback");
// const RegBtnOrg=document.getElementById("RegBtnOrg");

// passwordInput.addEventListener("input", () => {
// const password = passwordInput.value;

// // Check for password requirements
// const hasUppercase = /[A-Z]/.test(password);
// const hasLowercase = /[a-z]/.test(password);
// const hasNumber = /[0-9]/.test(password);
// const hasSpecialChar = /[$&+,:;=?@#|'<>.^*()%!-]/.test(password);
// const hasMinLength = password.length >= 8;

// // Set error message for invalid password
// if (!hasUppercase ) {
//   invalidFeedback.textContent = "Password must contain at least 1 uppercase letter";
//   passwordInput.classList.add("is-invalid");
// RegBtnOrg.disabled=true;
// }else if(!hasLowercase){
//   invalidFeedback.textContent="Passwords must contain AT LEAST 1 LOWERCASE LETTER";
//   passwordInput.classList.add("is-invalid");
//   RegBtnOrg.disabled=true;
// }else if(!hasNumber){
//   invalidFeedback.textContent="Passwords must contain AT LEAST 1 NMumber";
//   passwordInput.classList.add("is-invalid");
//   RegBtnOrg.disabled=true;
// }
// else if(!hasSpecialChar){
//   invalidFeedback.textContent="Passwords must contain AT LEAST 1 character";
//   passwordInput.classList.add("is-invalid");
//   RegBtnOrg.disabled=true;
// }
//  else {
//   invalidFeedback.textContent = "";
//   passwordInput.classList.remove("is-invalid");
//   RegBtnOrg.disabled=false;
// }
// });

// passwordInput.addEventListener("blur", () => {
// if (passwordInput.value === "") {
//   invalidFeedback.textContent = "Password is required.";
//   passwordInput.classList.add("is-invalid");
//   RegBtnOrg.disabled=true;
// } else {
//   invalidFeedback.textContent = "";
//   passwordInput.classList.remove("is-invalid");
//   RegBtnOrg.disabled=false;
// }
// });


function validatePassword() {
  const passwordInput = document.getElementById("password");
  const invalidFeedback = document.querySelector(".invalid-feedback");
  const RegBtnOrg=document.getElementById("RegBtnOrg");

  const password = passwordInput.value;

  // Check for password requirements
  const hasUppercase = /[A-Z]/.test(password);
  const hasLowercase = /[a-z]/.test(password);
  const hasNumber = /[0-9]/.test(password);
  const hasSpecialChar = /[$&+,:;=?@#|'<>.^*()%!-]/.test(password);
  const hasMinLength = password.length >= 8;

  // Set error message for invalid password
  if (!hasUppercase ) {
    invalidFeedback.textContent = "Password must contain at least 1 uppercase letter";
    passwordInput.classList.add("is-invalid");
    RegBtnOrg.disabled=true;
  } else if (!hasLowercase){
    invalidFeedback.textContent = "Passwords must contain AT LEAST 1 LOWERCASE LETTER";
    passwordInput.classList.add("is-invalid");
    RegBtnOrg.disabled=true;
  } else if (!hasNumber){
    invalidFeedback.textContent = "Passwords must contain AT LEAST 1 number";
    passwordInput.classList.add("is-invalid");
    RegBtnOrg.disabled=true;
  } else if (!hasSpecialChar){
    invalidFeedback.textContent = "Passwords must contain AT LEAST 1 special character";
    passwordInput.classList.add("is-invalid");
    RegBtnOrg.disabled=true;
  } else {
    invalidFeedback.textContent = "";
    passwordInput.classList.remove("is-invalid");
    RegBtnOrg.disabled=false;
  }
}

const passwordInput = document.getElementsByClassName("passwordReg")[0];
const showPasswordCheckbox = document.getElementById("showPasswordReg");

passwordInput.addEventListener("input", () => {
  validatePassword();
});

passwordInput.addEventListener("blur", () => {
  validatePassword();
});

showPasswordCheckbox.addEventListener("click", () => {
  // const passwordField = document.getElementsByClassName("passwordReg")[0];
  if (showPasswordCheckbox.checked) {
    passwordInput.type = "text";
  } else {
    passwordInput.type = "password";
  }
});
</script>
<script>
  var contModal = document.getElementById("myModalCont");
  var form = document.getElementById("formContact");

  // Show the modal when the form is submitted
  contModal.classList.add("showCont");

  // Hide the modal after 4 seconds
  setTimeout(function () {
    contModal.classList.remove("showCont");
  }, 3000);
</script>
{% endblock jsLinks %}